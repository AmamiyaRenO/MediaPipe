# 游戏开始功能测试计划

## 测试环境准备

### 前置条件
1. Unity项目中已添加GameStateManager.cs
2. 场景中已包含GameStateManager GameObject
3. Vosk语音识别模型已正确配置
4. 麦克风权限已开启

### 预期组件状态
- GameStateManager: Active
- VoiceController (BoatVoiceController): Active  
- BoatController: Active
- PoseLandmarkerRunner: Active

## 测试用例

### 🎮 TC001: 游戏启动时显示标题画面
**步骤:**
1. 启动Unity游戏
2. 观察屏幕显示

**预期结果:**
- ✅ 显示半透明黑色背景覆盖
- ✅ 显示白色主标题"Slow Boat Motion Control Game"
- ✅ 显示黄色副标题"Say 'start' or 'begin' to play"（闪烁）
- ✅ 显示青色提示"🎤 Voice Control | 🤸 Motion Control"
- ✅ 底部显示支持的语音指令列表
- ✅ 底部显示键盘提示"Or press SPACEBAR to start"

### 🎤 TC002: 语音指令"start"开始游戏
**步骤:**
1. 游戏启动后看到标题画面
2. 对麦克风说"start"
3. 观察游戏状态变化

**预期结果:**
- ✅ 标题画面消失
- ✅ 控制台显示"🚀 游戏开始！触发方式: 语音指令: 'start'"
- ✅ 船体控制系统激活
- ✅ 波浪预测UI出现
- ✅ 姿态检测开始生效

### 🎤 TC003: 其他语音开始指令测试
**步骤:**
分别测试以下指令:
- "begin" 
- "开始"
- "go" 
- "play"

**预期结果:**
- ✅ 所有指令都能成功开始游戏
- ✅ 控制台显示相应的触发日志

### ⌨️ TC004: 空格键备用启动
**步骤:**
1. 游戏启动后看到标题画面
2. 按下空格键
3. 观察游戏状态变化

**预期结果:**
- ✅ 标题画面消失
- ✅ 控制台显示"🚀 游戏开始！触发方式: 键盘空格键"
- ✅ 游戏正常开始

### 🚫 TC005: 游戏未开始时语音指令被忽略
**步骤:**
1. 游戏启动后看到标题画面
2. 尝试说出船体控制指令如"left", "right", "bigger waves"等
3. 观察游戏反应

**预期结果:**
- ✅ 标题画面继续显示
- ✅ 船体不发生任何控制反应
- ✅ 控制台显示"⏸️ 游戏未开始，忽略其他语音指令"

### 🔄 TC006: 游戏开始后功能正常
**步骤:**
1. 通过语音或空格键开始游戏
2. 测试原有功能:
   - 体感控制 (左右倾斜身体)
   - 语音控制 ("left", "right", "balance")
   - 波浪控制 ("bigger waves", "smaller waves")
   - 摄像头控制 ("show camera", "hide camera") 
   - 货物系统 ("add cargo")
   - 天空切换 ("morning", "noon", "evening")
   - 风向控制 ("wind left", "wind right", "random wind")

**预期结果:**
- ✅ 所有原有功能正常工作
- ✅ 没有功能丢失或异常

### 🔧 TC007: 组件自动发现功能
**步骤:**
1. 在Inspector中将GameStateManager的组件引用设为None
2. 启动游戏
3. 观察控制台日志

**预期结果:**
- ✅ 控制台显示"✅ 自动找到BoatController"
- ✅ 控制台显示"✅ 自动找到BoatVoiceController"  
- ✅ 功能正常工作无需手动配置

### 📱 TC008: 不同分辨率适配测试
**步骤:**
1. 在不同屏幕分辨率下测试
2. 观察标题画面布局

**预期结果:**
- ✅ 标题居中显示
- ✅ 文字不会被截断
- ✅ 布局美观合理

### 🐛 TC009: 错误处理测试
**步骤:**
1. 禁用VoiceController组件
2. 启动游戏
3. 观察功能表现

**预期结果:**
- ✅ 游戏仍能启动
- ✅ 空格键启动仍然有效
- ✅ 控制台显示相应警告信息

### 🎵 TC010: JSON语音结果解析测试
**步骤:**
1. 模拟Vosk返回JSON格式结果
2. 观察指令解析情况

**预期结果:**
- ✅ 正确解析{"alternatives":[{"text":"start"}]}格式
- ✅ 提取出纯文本指令"start"
- ✅ 游戏正确开始

## 性能测试

### 🚀 TC011: 启动性能测试
**测试指标:**
- GameStateManager初始化时间 < 100ms
- 标题画面渲染流畅 (60fps)
- 语音识别订阅延迟 < 2秒

### 💾 TC012: 内存占用测试
**测试指标:**
- GameStateManager内存占用 < 1MB
- 无内存泄漏
- GC压力较小

## 兼容性测试

### 🖥️ TC013: 平台兼容性
**测试平台:**
- Windows 10/11
- Android (如果需要)
- WebGL (如果需要)

**预期结果:**
- ✅ 所有目标平台功能正常
- ✅ 界面显示正确

## 回归测试

### 🌬️ TC014: 风向语音控制测试
**步骤:**
1. 开始游戏后观察当前风向箭头
2. 分别测试风向指令：
   - "wind left" / "left wind" / "turn wind left"
   - "wind right" / "right wind" / "turn wind right"  
   - "random wind" / "change wind" / "shuffle wind"
3. 观察海浪方向和船体摇摆变化

**预期结果:**
- ✅ 所有风向指令正确识别
- ✅ 海浪方向立即改变
- ✅ GUI风向箭头同步更新
- ✅ 控制台显示风向变化日志
- ✅ 船体摇摆趋势相应改变

### 🔙 TC015: 原有功能回归测试
**测试范围:**
- MediaPipe姿态检测
- Vosk语音识别  
- 船体物理模拟
- 波浪系统
- 货物系统
- UI系统
- 风向控制系统

**预期结果:**
- ✅ 所有原有功能保持正常
- ✅ 无功能退化或破坏
- ✅ 新增风向控制功能正常集成

## 测试记录模板

```
测试用例: TC###
执行时间: YYYY-MM-DD HH:MM
测试人员: [姓名]
测试环境: Unity [版本] / [平台]

执行步骤:
1. [步骤1]
2. [步骤2] 
...

实际结果:
[描述实际观察到的现象]

测试结果: ✅通过 / ❌失败
备注: [如有异常情况请描述]
```

## 验收标准

所有标记为✅的测试点都必须通过，游戏开始功能才算验收合格。

### 核心功能要求:
1. 游戏启动时必须显示标题画面
2. 语音"start"指令必须能开始游戏  
3. 游戏开始前船体控制必须被禁用
4. 游戏开始后所有功能必须正常工作
5. 界面显示必须美观且适配不同分辨率

### 可靠性要求:
1. 组件自动发现必须工作
2. 错误情况下有备用启动方案
3. 不能影响原有功能的稳定性
4. 性能开销控制在合理范围内 